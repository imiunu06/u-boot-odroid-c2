From 721acbd2b28ae50ad7bc1d43f1e3df103b236885 Mon Sep 17 00:00:00 2001
From: Heinrich Schuchardt <xypron.glpk@gmx.de>
Date: Fri, 2 Feb 2018 13:33:33 +0100
Subject: [PATCH 1/1] efi_loader: add missing EFI_RESET_PLATFORM_SPECIFIC

A constant needed for ResetSystem is added.

Signed-off-by: Heinrich Schuchardt <xypron.glpk@gmx.de>
---
 include/efi_api.h            | 3 ++-
 lib/efi_loader/efi_runtime.c | 1 +
 2 files changed, 3 insertions(+), 1 deletion(-)

diff --git a/include/efi_api.h b/include/efi_api.h
index a2706a0ae4..81e2fd204e 100644
--- a/include/efi_api.h
+++ b/include/efi_api.h
@@ -173,7 +173,8 @@ struct efi_boot_services {
 enum efi_reset_type {
 	EFI_RESET_COLD = 0,
 	EFI_RESET_WARM = 1,
-	EFI_RESET_SHUTDOWN = 2
+	EFI_RESET_SHUTDOWN = 2,
+	EFI_RESET_PLATFORM_SPECIFIC = 3,
 };
 
 /* EFI Runtime Services table */
diff --git a/lib/efi_loader/efi_runtime.c b/lib/efi_loader/efi_runtime.c
index 8104e08c46..471ac29d60 100644
--- a/lib/efi_loader/efi_runtime.c
+++ b/lib/efi_loader/efi_runtime.c
@@ -80,6 +80,7 @@ static void EFIAPI efi_reset_system_boottime(
 	switch (reset_type) {
 	case EFI_RESET_COLD:
 	case EFI_RESET_WARM:
+	case EFI_RESET_PLATFORM_SPECIFIC:
 		do_reset(NULL, 0, 0, NULL);
 		break;
 	case EFI_RESET_SHUTDOWN:
-- 
2.15.1

