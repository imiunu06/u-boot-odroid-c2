From 8b5e6f8a9401cfaa2cbe4ca5f417bbb68da6a8a2 Mon Sep 17 00:00:00 2001
From: Heinrich Schuchardt <xypron.glpk@gmx.de>
Date: Fri, 7 Apr 2017 21:27:18 +0200
Subject: [PATCH v3 1/1] meson: gxbb: enable MMC as boot target

To enable automatic booting from SD card or eMMC the MMC
devices 0, 1, and 2 are added to the BOOT_TARGET_DEVICES.

Booting from SD card, eMMC, and DHCP are tried in sequence.
A missing or failing device is gracefully handled.

Cc: Andreas FÃ¤rber <afaerber@suse.de>
Signed-off-by: Heinrich Schuchardt <xypron.glpk@gmx.de>
---
v3:
  Adjust patch title to reflect that this patch applies to all
  gxbb boards.
  Vega S95 Telos has 3 MMC devices.
  So add MMC 2.
v2:
  odroid-c2: enable MMC as boot target
  https://lists.denx.de/pipermail/u-boot/2017-April/287358.html
  Enhance commit message to clearly indicate how the
  boot targets are sequenced.
v1:
  This is a resubmission of
  https://lists.denx.de/pipermail/u-boot/2017-April/287315.html
  where this patch was part of patch series which was no longer applicable.
---
 include/configs/meson-gxbb-common.h | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/include/configs/meson-gxbb-common.h b/include/configs/meson-gxbb-common.h
index cc2b5b61d4..997ce2df19 100644
--- a/include/configs/meson-gxbb-common.h
+++ b/include/configs/meson-gxbb-common.h
@@ -39,6 +39,9 @@
 #include <config_distro_defaults.h>
 
 #define BOOT_TARGET_DEVICES(func) \
+	func(MMC, mmc, 0) \
+	func(MMC, mmc, 1) \
+	func(MMC, mmc, 2) \
 	func(DHCP, dhcp, na)
 
 #include <config_distro_bootcmd.h>
-- 
2.11.0

