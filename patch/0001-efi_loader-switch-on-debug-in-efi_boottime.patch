From b6ed8157d8d5e2d35371425df4beaa44c0f9aee6 Mon Sep 17 00:00:00 2001
From: Heinrich Schuchardt <xypron.glpk@gmx.de>
Date: Sat, 1 Jul 2017 22:46:44 +0200
Subject: [PATCH 1/1] efi_loader: switch on debug in efi_boottime

Signed-off-by: Heinrich Schuchardt <xypron.glpk@gmx.de>
---
 lib/efi_loader/efi_boottime.c | 11 +++++++++++
 1 file changed, 11 insertions(+)

diff --git a/lib/efi_loader/efi_boottime.c b/lib/efi_loader/efi_boottime.c
index d3595dc23c..dd074b0d73 100644
--- a/lib/efi_loader/efi_boottime.c
+++ b/lib/efi_loader/efi_boottime.c
@@ -16,6 +16,9 @@
 #include <inttypes.h>
 #include <watchdog.h>
 
+#undef _DEBUG
+#define _DEBUG 1
+
 DECLARE_GLOBAL_DATA_PTR;
 
 /* This list contains all the EFI objects our payload has access to */
@@ -152,6 +155,8 @@ static u64 efi_div10(u64 a)
 	return ret;
 }
 
+#undef _DEBUG
+#define _DEBUG 0
 void efi_signal_event(struct efi_event *event)
 {
 	if (event->signaled)
@@ -161,6 +166,8 @@ void efi_signal_event(struct efi_event *event)
 		EFI_CALL(event->notify_function(event, event->notify_context));
 	}
 }
+#undef _DEBUG
+#define _DEBUG 1
 
 static efi_status_t efi_unsupported(const char *funcname)
 {
@@ -434,6 +441,8 @@ static efi_status_t EFIAPI efi_close_event(struct efi_event *event)
 	return EFI_EXIT(EFI_INVALID_PARAMETER);
 }
 
+#undef _DEBUG
+#define _DEBUG 0
 static efi_status_t EFIAPI efi_check_event(struct efi_event *event)
 {
 	int i;
@@ -451,6 +460,8 @@ static efi_status_t EFIAPI efi_check_event(struct efi_event *event)
 	}
 	return EFI_EXIT(EFI_INVALID_PARAMETER);
 }
+#undef _DEBUG
+#define _DEBUG 1
 
 static efi_status_t EFIAPI efi_install_protocol_interface(void **handle,
 			efi_guid_t *protocol, int protocol_interface_type,
-- 
2.13.2

