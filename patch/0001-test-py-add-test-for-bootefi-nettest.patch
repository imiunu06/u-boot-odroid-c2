From ab3915e4dfbb82ad747986191c8b371f4044d593 Mon Sep 17 00:00:00 2001
From: Heinrich Schuchardt <xypron.glpk@gmx.de>
Date: Sat, 23 Sep 2017 17:10:57 +0200
Subject: [PATCH 1/1] test/py: add test for bootefi nettest

Add a Python test calling the network selftest.

Signed-off-by: Heinrich Schuchardt <xypron.glpk@gmx.de>
---
 test/py/tests/test_efi_loader.py | 11 +++++++++++
 1 file changed, 11 insertions(+)

diff --git a/test/py/tests/test_efi_loader.py b/test/py/tests/test_efi_loader.py
index 4d391e13ef..71897a0f8c 100644
--- a/test/py/tests/test_efi_loader.py
+++ b/test/py/tests/test_efi_loader.py
@@ -155,6 +155,17 @@ def test_efi_helloworld_net(u_boot_console):
     expected_text = 'Hello, world'
     assert expected_text in output
 
+@pytest.mark.buildconfigspec('cmd_bootefi_network_test')
+def test_efi_network_test(u_boot_console):
+	"""
+	Run bootefi nettest
+	"""
+
+	u_boot_console.run_command(cmd='bootefi nettest', wait_for_prompt=False)
+	output = u_boot_console.run_command('bootefi nettest')
+	expected_text= ['The test was completed successfully'
+	assert expected_text in output
+
 @pytest.mark.buildconfigspec('cmd_bootefi_hello')
 def test_efi_helloworld_builtin(u_boot_console):
     """Run the builtin helloworld.efi binary.
-- 
2.11.0

